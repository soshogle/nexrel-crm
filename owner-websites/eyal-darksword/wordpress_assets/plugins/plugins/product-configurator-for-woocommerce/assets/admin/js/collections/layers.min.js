var PC=PC||{};(e=>{PC.layers=Backbone.Collection.extend({url:function(){var t=ajaxurl+"?action="+PC.actionParameter+"&data=layers";return this.product_id&&(t+="&id="+this.product_id),t},model:PC.layer,initialize:function(t,r){r&&r.product_id&&(this.product_id=r.product_id)},nextOrder:function(t){return t=t||"order",this.length?parseInt(this.last().get(t))+1:1},comparator:function(t){return this.orderBy?t.get(this.orderBy):t.get("order")},sync:function(t,r,e){},create_layer:function(t){return e.extend(t,{_id:PC.app.get_new_id(this),order:this.nextOrder(),image_order:this.nextOrder("image_order"),active:!0})},get_children:function(t){var r;return t.children||((r=this.where({parent:t.id})).length&&e.each(r,function(t){t=this.get_children(t);t.count&&(r=r.concat(t))}.bind(this)),t.children=r),t.children}})})(PC._us||window._);